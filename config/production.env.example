# ProManage Production Environment
# SECURITY WARNING: Never commit this file with actual values!
# Use environment variables or secure secret management

# =============================================================================
# GENERAL
# =============================================================================

NODE_ENV=production
APP_NAME=ProManage
PORT=3001
APP_URL=https://app.promanage.com
API_URL=https://api.promanage.com

# =============================================================================
# DATABASE
# =============================================================================

# Production PostgreSQL (use connection pooler like PgBouncer)
DATABASE_URL=postgresql://username:password@db-host:5432/promanage_production

# Production connection pool settings
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=50

# Enable SSL for database connection
DATABASE_SSL=true

# =============================================================================
# REDIS
# =============================================================================

# Production Redis (Redis Cloud, ElastiCache, etc.)
REDIS_URL=redis://username:password@redis-host:6379
REDIS_PREFIX=promanage:prod:

# Enable Redis TLS
REDIS_TLS=true

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# CRITICAL: Generate strong JWT secret!
# Generate with: openssl rand -base64 64
JWT_SECRET=REPLACE_WITH_SECURE_RANDOM_STRING_FROM_SECRET_MANAGER

# Production token expiration
JWT_ACCESS_EXPIRES_IN=15
JWT_REFRESH_EXPIRES_IN=7

# Higher bcrypt rounds for production
BCRYPT_SALT_ROUNDS=12

# Production CORS origins (comma-separated)
CORS_ORIGINS=https://app.promanage.com,https://www.promanage.com

# =============================================================================
# FILE STORAGE
# =============================================================================

# AWS S3 (or S3-compatible service)
S3_ENDPOINT=s3.amazonaws.com
S3_REGION=us-east-1
S3_BUCKET=promanage-production-uploads
S3_ACCESS_KEY=REPLACE_WITH_AWS_ACCESS_KEY
S3_SECRET_KEY=REPLACE_WITH_AWS_SECRET_KEY
S3_USE_SSL=true
S3_PUBLIC_URL=https://cdn.promanage.com

# Production upload limit: 50MB
MAX_UPLOAD_SIZE=52428800

# =============================================================================
# EMAIL
# =============================================================================

# Production email service (SendGrid, Mailgun, SES, etc.)
EMAIL_PROVIDER=sendgrid

# SendGrid Configuration
SENDGRID_API_KEY=REPLACE_WITH_SENDGRID_API_KEY

# Or AWS SES Configuration
# AWS_SES_REGION=us-east-1
# AWS_SES_ACCESS_KEY=REPLACE_WITH_AWS_ACCESS_KEY
# AWS_SES_SECRET_KEY=REPLACE_WITH_AWS_SECRET_KEY

EMAIL_FROM=noreply@promanage.com
EMAIL_FROM_NAME=ProManage

# =============================================================================
# LOGGING
# =============================================================================

# Production logging
LOG_LEVEL=info
LOG_PRETTY=false

# =============================================================================
# RATE LIMITING
# =============================================================================

# Strict rate limiting for production
RATE_LIMIT_MAX=1000
RATE_LIMIT_WINDOW=900000

# =============================================================================
# WEBSOCKET
# =============================================================================

WS_URL=wss://api.promanage.com
WS_PATH=/socket.io
WS_COMPRESSION=true

# =============================================================================
# MONITORING & ERROR TRACKING
# =============================================================================

# Sentry for error tracking
SENTRY_DSN=https://REPLACE_WITH_SENTRY_DSN@sentry.io/project-id
SENTRY_ENVIRONMENT=production

# Sample rate for performance monitoring (10%)
SENTRY_TRACES_SAMPLE_RATE=0.1

# Release version (from CI/CD)
SENTRY_RELEASE=${GIT_SHA}

# =============================================================================
# FEATURES
# =============================================================================

# Production feature flags
FEATURE_REGISTRATION_ENABLED=true
FEATURE_EMAIL_VERIFICATION_ENABLED=true
FEATURE_TWO_FACTOR_AUTH_ENABLED=true

# =============================================================================
# SECURITY
# =============================================================================

# Helmet security headers (all enabled)
HELMET_ENABLED=true

# Content Security Policy
CSP_ENABLED=true

# Enable HTTPS redirects
FORCE_HTTPS=true

# Session security
SESSION_SECURE=true
SESSION_SAME_SITE=strict

# =============================================================================
# PERFORMANCE
# =============================================================================

# Enable compression
COMPRESSION_ENABLED=true

# Cache TTL (in seconds)
CACHE_TTL=3600

# Enable response caching
RESPONSE_CACHE_ENABLED=true

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================

# Google OAuth
GOOGLE_CLIENT_ID=REPLACE_WITH_GOOGLE_CLIENT_ID
GOOGLE_CLIENT_SECRET=REPLACE_WITH_GOOGLE_CLIENT_SECRET
GOOGLE_CALLBACK_URL=https://api.promanage.com/auth/google/callback

# Apple Sign In
APPLE_CLIENT_ID=REPLACE_WITH_APPLE_CLIENT_ID
APPLE_TEAM_ID=REPLACE_WITH_APPLE_TEAM_ID
APPLE_KEY_ID=REPLACE_WITH_APPLE_KEY_ID
APPLE_PRIVATE_KEY=REPLACE_WITH_APPLE_PRIVATE_KEY

# =============================================================================
# BACKUP & DISASTER RECOVERY
# =============================================================================

# Automated backup settings
BACKUP_ENABLED=true
BACKUP_S3_BUCKET=promanage-backups
BACKUP_SCHEDULE=0 2 * * *

# Point-in-time recovery window (days)
PITR_RETENTION_DAYS=30

# =============================================================================
# SCALING & INFRASTRUCTURE
# =============================================================================

# Worker concurrency (based on CPU cores)
WEB_CONCURRENCY=4

# Max memory per process (MB)
MAX_MEMORY=512

# Health check endpoint
HEALTH_CHECK_PATH=/health

# Graceful shutdown timeout (seconds)
SHUTDOWN_TIMEOUT=30

# =============================================================================
# COMPLIANCE & LEGAL
# =============================================================================

# Data retention policy (days)
DATA_RETENTION_DAYS=2555

# GDPR compliance mode
GDPR_MODE=true

# Cookie consent required
COOKIE_CONSENT_REQUIRED=true

# =============================================================================
# MOBILE APP (Production)
# =============================================================================

# Mobile app environment variables (for EAS builds)
EXPO_PUBLIC_API_URL=https://api.promanage.com
EXPO_PUBLIC_WS_URL=wss://api.promanage.com
EXPO_PUBLIC_ENV=production
EXPO_PUBLIC_SENTRY_DSN=REPLACE_WITH_MOBILE_SENTRY_DSN

# =============================================================================
# WEB APP (Production)
# =============================================================================

# Web app environment variables (for Next.js builds)
NEXT_PUBLIC_API_URL=https://api.promanage.com
NEXT_PUBLIC_WS_URL=wss://api.promanage.com
NEXT_PUBLIC_ENV=production
NEXT_PUBLIC_SENTRY_DSN=REPLACE_WITH_WEB_SENTRY_DSN

# =============================================================================
# CI/CD
# =============================================================================

# Build information (injected by CI/CD)
GIT_SHA=${GIT_SHA}
GIT_BRANCH=${GIT_BRANCH}
BUILD_NUMBER=${BUILD_NUMBER}
BUILD_TIMESTAMP=${BUILD_TIMESTAMP}

# =============================================================================
# NOTES
# =============================================================================

# 1. Use environment-specific secret management:
#    - AWS Secrets Manager
#    - HashiCorp Vault
#    - GitHub Secrets
#    - Doppler
#
# 2. Never commit actual production values to git
#
# 3. Rotate secrets regularly (at least quarterly)
#
# 4. Use different secrets for each environment
#
# 5. Monitor for secret leaks with tools like:
#    - GitGuardian
#    - TruffleHog
#    - GitHub Secret Scanning
